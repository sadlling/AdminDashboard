# Admin Dashboard

Проект "Admin Dashboard ", демонстрирующий создание веб-приложения с бэкендом на ASP.NET Core 8 и фронтендом на React (Vite + TypeScript). Приложение представляет собой минимальную панель администратора для управления клиентами, их платежами и курсом токенов.

## Содержание

- [Структура Проекта](#структура-проекта)
- [Технологический Стек](#технологический-стек)
- [Требования](#требования)
- [Установка и Запуск](#установка-и-запуск)
  - [Клонирование Репозитория](#1-клонирование-репозитория)
  - [Запуск Бэкенда (API)](#2-запуск-бэкенда-api)
  - [Запуск Фронтенда (React)](#3-запуск-фронтенда-react)
- [Данные для Входа](#данные-для-входа)
- [Краткий Обзор Функционала](#краткий-обзор-функционала)
- [Примеры API Запросов (cURL)](#примеры-api-запросов-curl)
  - [Аутентификация](#аутентификация)
  - [Платежи](#платежи)
  - [Курс Токенов](#курс-токенов)
  - [Клиенты](#клиенты)

## Структура Проекта

Проект организован в виде монорепозитория с двумя основными каталогами:

- `backend/`: Содержит ASP.NET Core Web API, реализующий бизнес-логику и взаимодействие с базой данных. Используется Vertical Slice Architecture, MediatR, AutoMapper, FluentValidation.
- `frontend/`: Содержит одностраничное приложение (SPA) на React, созданное с помощью Vite. Использует TypeScript, Chakra UI для компонентов, Axios для HTTP-запросов, React Hook Form для управления формами и React Router DOM для навигации.

## Технологический Стек

### Бэкенд

- **Фреймворк:** ASP.NET Core 8 (Web API)
- **Архитектура:** Vertical Slice Architecture
- **База данных:** SQLite
- **ORM:** Entity Framework Core 8
- **Медиатор:** MediatR
- **Маппинг:** AutoMapper
- **Валидация:** FluentValidation
- **Аутентификация:** JWT (Access Token + Refresh Token, передаются через HttpOnly Cookies)
- **Логирование:** Serilog (сконфигурировано для вывода в консоль и в файл)

### Фронтенд

- **Библиотека/Фреймворк:** React
- **Сборщик:** Vite
- **Язык:** TypeScript
- **UI Компоненты:** Chakra UI
- **HTTP Клиент:** Axios
- **Управление формами:** React Hook Form
- **Роутинг:** React Router DOM
- **Управление состоянием аутентификации:** React Context API (`AuthContext`)

## Требования

Для локального запуска и разработки проекта вам понадобятся:

- [.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0) (версия 8.0.x или выше)
- [Node.js](https://nodejs.org/)
- Git для клонирования репозитория.

## Установка и Запуск

### 1. Клонирование Репозитория

Сначала склонируйте репозиторий на ваш локальный компьютер:

```bash
git clone https://github.com/sadlling/AdminDashboard.git
cd AdminDashboard
```

### 2. Запуск Бэкенда (API)

Для запуска бэкенда перейдите под анному пути

```bash
cd backend\AdminDashboardBackend\AdminDashboardBackend>
```

Выполните следующие комманды

```bash
# Создайте сертификат (если отсутствует)
dotnet dev-certs https

# Доверьте сертификат (требует прав администратора)
dotnet dev-certs https --trust

dotnet run --urls "https://localhost:7134"
```

При первом запуске Entity Framework Core автоматически создаст базу данных SQLite (app.db) и применит все существующие миграции. Также будут добавлены начальные данные (пользователь admin@mirra.dev, клиенты, курс).

### 3. Запуск Фронтенда (React)

Для запоска клиентской части выполните следующие команды

```bash
cd frontend
npm install
npm run dev
```

После успешного запуска, откройте http://localhost:5173 в вашем веб-браузере.

### Данные для Входа

Для входа в панель администратора используйте следующие учетные данные:
Email: admin@mirra.dev
Пароль: admin123

### Краткий Обзор Функционала

Аутентификация: Вход пользователя с использованием JWT и Refresh токенов (HttpOnly Cookies).
Панель Управления (Dashboard):
Клиенты: Отображение списка клиентов с пагинацией, возможность добавления, редактирования и удаления клиентов.
Платежи: Отображение списка последних платежей с пагинацией.
Курс Токенов: Отображение текущего курса токенов и возможность его изменения.

### Примеры API Запросов (cURL)

### Аутентификация

1. Логин Пользователя

```bash
curl -X 'POST' \
  'https://localhost:7134/api/auth/login' \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{
  "email": "admin@mirra.dev",
  "password": "admin123"
}'
```

### Платежи

1. Получение Списка Платежей (защищено, с пагинацией)

```bash
curl -X 'GET' \
  'https://localhost:7134/api/payments?pageNumber=1&pageSize=5' \
  -H 'accept: */*'
```

### Курс Токенов

1. Получение Текущего Курса (защищено)

```bash
curl -X 'GET' \
  'https://localhost:7134/api/rate' \
  -H 'accept: */*'
```

2. Обновление Курса (защищено)

```bash
curl -X 'POST' \
  'https://localhost:7134/api/rate' \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{
  "newRate": 5
}'
```

### Клиенты

1. Получение Списка Клиентов (защищено, с пагинацией)

```bash
curl -X 'GET' \
  'https://localhost:7134/api/clients?pageNumber=1&pageSize=5' \
  -H 'accept: */*'
```
